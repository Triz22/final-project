{% extends 'base.html' %} {% block content %}
{% load static %}

<div class="container mt-5 post-detail">
    <div class="row">
        <div class="col-md-8 offset-md-2 text-center">
            <!-- Post title goes in h1 tags -->
            <h1 class="post-title">{{ post.anime_title }}</h1>

            <p class="post-subtitle">{{ post.author }} | {{ post.created_on }}</p>
            {% if "placeholder" in post.featured_image.url %}
            <img src="{% static 'images/default.jpg' %}" class="img-fluid mb-4" alt="placeholder"
                style="max-width: 60%; height: 100%;">
            {% else %}
            <img class="img-fluid mb-4" src=" {{ post.featured_image.url }}" alt="{{ post.title}}">
            {% endif %}
        </div>
    </div>
    <div class="row">
        <div class="col-md-8 card offset-md-2">
            <div class="mb-4">
                <div class="card-body">
                    <!-- The post content goes inside the card-text. -->
                    <p class="card-text">
                        {{ post.description | safe }}
                    </p>
                    <p>
                        {% if post.recommended is True %}
                        <p>I'm recommending this Anime</p>
                        {% else %}
                        <p>Not recommended!</p>
                        {% endif %}


                        <!-- {{post.recommended}} -->
                    </p>
                    <p>
                        I rate this anime a <strong>{{post.rating}} out of 5</strong>
                    </p>
                </div>
            </div>
        </div>

        <!-- Like/Unlike button-->
        <div class="text-center mb-4">
            <form method="post" action="{% url 'post_like' post.id %}">
                {% csrf_token %}
                <button type="submit">
                    {% if user in post.likes.all %}
                    Unlike
                    {% else %}
                    Like
                    {% endif %}
                </button>
            </form>
        </div>
        <p>
            Likes: {{ post.total_likes }}
        </p>
    </div>


    <div class="container">

    </div>

    <!-- Comments -->
    <div class="container">
        <h3>Comments:</h3>
        <div class="card-body">
            {% for comment in comments %}
            <div class="comments mb-3">
                <p class="font-weight-bold">
                    {{ comment.author }}
                    <span class=" text-muted font-weight-normal">
                        {{ comment.created_on }}
                    </span> wrote:
                </p>
                <p>{{ comment.body | linebreaks }}</p>
            </div>
        </div>
    </div>

</div>
</div>

{% endfor %}

{% endblock content %}